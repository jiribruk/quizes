<div class="question-item border rounded p-3 mb-3" data-controller="quizzes" id="question_id_<%= question_index %>">
  <div class="d-flex justify-content-between align-items-start mb-3">
    <h6 class="mb-0">Otázka <%= question_index + 1 %></h6>
    <button type="button" class="btn btn-outline-danger btn-sm remove-question-btn" data-action="quizzes#remove">
      <i class="bi bi-trash"></i> Odstranit
    </button>
  </div>

  <div class="mb-3">
    <%= label_tag "quiz[questions_attributes][#{question_index}][text]",
                  "Text otázky",
                  class: "form-label fw-bold" %>
    <%= text_area_tag "quiz[questions_attributes][#{question_index}][text]",
                      question.text, class: "form-control",
                      rows: 3,
                      placeholder: "Zadejte text otázky" %>
    <%= hidden_field_tag "quiz[questions_attributes][#{question_index}][id]", question.id if question.persisted? %>
    <%= hidden_field_tag "quiz[questions_attributes][#{question_index}][_destroy]", "false", data: { quizzes_target: "destroyField" } %>
  </div>

  <!-- Answers section -->
  <div class="answers-section">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h6 class="mb-0">Odpovědi</h6>
      <%= link_to add_answer_quizzes_path(question_index: question_index, answer_index: answer_index || question.answers.index.max),
                  class: "btn btn-outline-primary btn-sm add-answer-btn",
                  id: "add_answer_button_for_question_#{question_index}",
                  data: {
                    turbo_method: :post,
                    turbo_stream: true,
                  } do %>
        <i class="bi bi-plus-circle"></i> Přidat odpověď
      <% end %>
    </div>

    <div class="answers-container" id="answers-container-for-question<%= "#{question_index}" %>">
      <% question.answers.each_with_index do |answer, index| %>
        <%= render partial: 'answer_form', locals: { question_index: question_index, answer_index: answer_index || index, answer: answer } %>
      <% end %>
    </div>
  </div>
</div> 